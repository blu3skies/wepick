<div class="card">
  <h1><%= @movie.title %></h1>
  <%= @movie.overview %>
  <img src="https://image.tmdb.org/t/p/w500<%= @movie.poster_path %>" >
</div>

<div>
  <% if @match %>
    <%= @match %>
    <%= button_to 'ReMatch', games_rematch_path(:user_id => current_user.id), method: :delete %>
  <% else %>
    <%= button_to 'Like', games_like_path(:user_id => current_user.id, :movie_id => @movie.id), method: :post %>
    <%= button_to 'Dislike', games_dislike_path(:user_id => current_user.id), method: :post %>
  <%end%>
</div>

<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', (event) => {

    var mouseXStart = 0

    var mouseDown = false

    var card = document.getElementsByClassName('card')[0]
    console.log(card)

    document.addEventListener("mousemove", (event) => {
      if (!mouseDown) {
        return
      }
      var mouseXOffset = (event.pageX - mouseXStart) * 0.1
      card.style.transform = `translateX(${mouseXOffset}rem) rotate(${mouseXOffset}deg)`
    })

    card.addEventListener("mousedown", (event) => {
      mouseXStart = event.pageX
      mouseDown = true
    })

    document.addEventListener("mouseup", (event) => {
      mouseDown = false
    })
    
  })
</script>
